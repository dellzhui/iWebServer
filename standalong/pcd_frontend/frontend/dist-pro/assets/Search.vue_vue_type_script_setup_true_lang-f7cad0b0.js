import{F as e}from"./Form-7bd7b6f3.js";import{d as t,ae as o,j as a,r as n,H as s,aj as i,a as l,bG as r,I as d,o as c,c as m,f as u,w as p,g as f,m as h,t as y,A as g,Y as x,F as b}from"./index-61faf58b.js";import{E as k}from"./el-button-e6441f40.js";import{u as v}from"./useForm-e3b0495d.js";const w={key:0},F=t({__name:"Search",props:{schema:{type:Array,default:()=>[]},isCol:o.bool.def(!1),labelWidth:o.oneOfType([String,Number]).def("auto"),layout:o.string.validate((e=>["inline","bottom"].includes(e))).def("inline"),buttomPosition:o.string.validate((e=>["left","center","right"].includes(e))).def("center"),showSearch:o.bool.def(!0),showReset:o.bool.def(!0),expand:o.bool.def(!1),expandField:o.string.def(""),inline:o.bool.def(!0),model:{type:Object,default:()=>({})}},emits:["search","reset"],setup(t,{emit:o}){const F=t,{t:_}=a(),C=n(!0),j=s((()=>{let e=i(F.schema);if(F.expand&&F.expandField&&!l(C)){const t=r(e,(e=>e.field===F.expandField));if(t>-1){const o=e.length;e.splice(t+1,o)}}return"inline"===F.layout&&(e=e.concat([{field:"action",formItemProps:{labelWidth:"0px"}}])),e})),{register:R,elFormRef:S,methods:q}=v({model:F.model||{}}),A=async()=>{var e;await(null==(e=l(S))?void 0:e.validate((async e=>{if(e){const{getFormData:e}=q,t=await e();o("search",t)}})))},I=async()=>{var e;null==(e=l(S))||e.resetFields();const{getFormData:t}=q,a=await t();o("reset",a)},P=s((()=>({textAlign:F.buttomPosition}))),W=()=>{var e;null==(e=l(S))||e.resetFields(),C.value=!l(C)};return(o,a)=>{const n=d("Icon");return c(),m(b,null,[u(l(e),{"is-custom":!1,"label-width":t.labelWidth,"hide-required-asterisk":"",inline:t.inline,"is-col":t.isCol,schema:l(j),onRegister:l(R)},{action:p((()=>["inline"===t.layout?(c(),m("div",w,[t.showSearch?(c(),f(l(k),{key:0,type:"primary",onClick:A},{default:p((()=>[u(n,{icon:"ep:search",class:"mr-5px"}),h(" "+y(l(_)("common.query")),1)])),_:1})):g("",!0),t.showReset?(c(),f(l(k),{key:1,onClick:I},{default:p((()=>[u(n,{icon:"ep:refresh-right",class:"mr-5px"}),h(" "+y(l(_)("common.reset")),1)])),_:1})):g("",!0),t.expand?(c(),f(l(k),{key:2,text:"",onClick:W},{default:p((()=>[h(y(l(_)(C.value?"common.shrink":"common.expand"))+" ",1),u(n,{icon:C.value?"ant-design:up-outlined":"ant-design:down-outlined"},null,8,["icon"])])),_:1})):g("",!0)])):g("",!0)])),_:1},8,["label-width","inline","is-col","schema","onRegister"]),"bottom"===t.layout?(c(),m("div",{key:0,style:x(l(P))},[t.showSearch?(c(),f(l(k),{key:0,type:"primary",onClick:A},{default:p((()=>[u(n,{icon:"ep:search",class:"mr-5px"}),h(" "+y(l(_)("common.query")),1)])),_:1})):g("",!0),t.showReset?(c(),f(l(k),{key:1,onClick:I},{default:p((()=>[u(n,{icon:"ep:refresh-right",class:"mr-5px"}),h(" "+y(l(_)("common.reset")),1)])),_:1})):g("",!0),t.expand?(c(),f(l(k),{key:2,text:"",onClick:W},{default:p((()=>[h(y(l(_)(C.value?"common.shrink":"common.expand"))+" ",1),u(n,{icon:C.value?"ant-design:up-outlined":"ant-design:down-outlined"},null,8,["icon"])])),_:1})):g("",!0)],4)):g("",!0)],64)}}});export{F as _};
