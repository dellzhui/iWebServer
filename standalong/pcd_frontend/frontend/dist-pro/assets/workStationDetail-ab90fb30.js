import{v as e,b as t,r as i,d as n,u as s,q as o,x as a,o as r,g as d,w as l,y as c,z as u,f as m,a as p,e as h,m as f,t as v,c as g,A as _,j as b,E as w,p as y,k}from"./index-61faf58b.js";import{_ as x}from"./ContentWrap.vue_vue_type_script_setup_true_lang-e04d0b7e.js";import{_ as C}from"./Infotip.vue_vue_type_script_setup_true_lang-3cd4fde7.js";import{a as I}from"./index-ea2c32ca.js";import{a as S}from"./index-218e5d70.js";import{E}from"./el-button-e6441f40.js";import{E as j}from"./el-tag-450bf357.js";import{_ as T}from"./Table.vue_vue_type_script_lang-b82724f5.js";import{_ as R}from"./Dialog.vue_vue_type_style_index_0_lang-eae2c59d.js";import{J as D,$ as L,S as q,u as M}from"./spin-6a0725f6.js";import{_ as N}from"./Highlight.vue_vue_type_script_lang-908af82b.js";import{c as O}from"./index-fdc8fc42.js";import{_ as W}from"./_plugin-vue_export-helper-1b428a4d.js";import"./el-card-839bb50e.js";import"./el-popper-e10402a6.js";import"./index-f844f20d.js";import"./index-4154bb8a.js";import"./tsxHelper-98042daf.js";import"./event-5568c9d8.js";import"./el-input-dc0bf57b.js";import"./index-7630a328.js";import"./scroll-a2507849.js";import"./debounce-7bd0410d.js";import"./validator-9877d78c.js";import"./el-overlay-37f85d5d.js";import"./vnode-ae8de639.js";import"./use-dialog-3079ebb1.js";import"./refs-31ecab84.js";const{wsCache:P}=e(),J=t(),U="undefined"!=typeof RTCPeerConnection?RTCPeerConnection:require("wrtc").RTCPeerConnection;class V{constructor(e){this._callback=null,this.incomingStream=null,this.outgoingStream=null,this._rtc=e,this._offerToReceive=!1}subscribe(e){this._callback=e,this.offerToReceive()}putSubscription(e){this.outgoingStream=e,this._rtc.addTrack(e)}offerToReceive(){this._offerToReceive=!0}_onTrack(e){this.incomingStream=e.streams[0],null!=this._callback&&this._callback(e.streams[0])}}class F{constructor(e=!0,t={iceServers:[{urls:P.get(J.server).turnServer,username:P.get(J.server).turnUsername,credential:P.get(J.server).turnCredential}]}){this._dataChannels={},this._msgcallback=e=>O.log(e),this._rtc=new U(t),this._rtc.ondatachannel=this._onDataChannel.bind(this),this._rtc.ontrack=this._onTrack.bind(this),this.video=new V(this._rtc),this.audio=new V(this._rtc),this._hasRemoteDescription=!1,this._defaultChannel=null,this._defaultOrdered=e,this.__queuedMessages=[],this.put_nowait=this.put_nowait.bind(this)}async _waitForICECandidates(){const e=this._rtc;await new Promise((function(t){if("complete"===e.iceGatheringState)t();else{let i=function(){"complete"===e.iceGatheringState&&(e.removeEventListener("icegatheringstatechange",i),t())};e.addEventListener("icegatheringstatechange",i)}}))}async getLocalDescription(e=null){if(this._hasRemoteDescription||null!=e){this._hasRemoteDescription||await this.setRemoteDescription(e);let t=await this._rtc.createAnswer();return await this._rtc.setLocalDescription(t),await this._waitForICECandidates(),{sdp:this._rtc.localDescription.sdp,type:this._rtc.localDescription.type}}this._defaultChannel=this._rtc.createDataChannel("default",{ordered:this._defaultOrdered}),this._defaultChannel.onmessage=this._onMessage.bind(this,this._defaultChannel),this._defaultChannel.onopen=this._sendQueuedMessages.bind(this);let t=await this._rtc.createOffer({offerToReceiveVideo:this.video._offerToReceive,offerToReceiveAudio:this.audio._offerToReceive});return await this._rtc.setLocalDescription(t),await this._waitForICECandidates(),this._rtc.localDescription}async setRemoteDescription(e){await this._rtc.setRemoteDescription(e),this._hasRemoteDescription=!0}_sendQueuedMessages(){if(this.__queuedMessages.length>0){for(let e=0;e<this.__queuedMessages.length;e++)this._defaultChannel.send(this.__queuedMessages[e]);this.__queuedMessages=[]}}_onDataChannel(e){O.log(e),(e=e.channel).onmessage=this._onMessage.bind(this,e),"default"==e.label?(this._defaultChannel=e,e.onopen=()=>this._sendQueuedMessages()):e.onopen=()=>this._dataChannels[e.label]=e}_onTrack(e){switch(e.track.kind){case"video":this.video._onTrack(e);break;case"audio":this.audio._onTrack(e);break;default:O.error("Could not recognize track!")}}_onMessage(e,t){this._msgcallback(t.data)}subscribe(e){this._msgcallback=e}put_nowait(e){"string"!=typeof e&&(e=JSON.stringify(e)),null!=this._defaultChannel&&"open"==this._defaultChannel.readyState&&0==this.__queuedMessages.length?this._defaultChannel.send(e):this.__queuedMessages.push(e)}async close(){for(let e in this._dataChannels)e.close();null!=this._defaultChannel&&this._defaultChannel.close(),await this._rtc.close()}}class B{constructor(){this._de=this._downEvent.bind(this),this._ue=this._upEvent.bind(this),this._md=this._mdownEvent.bind(this),this._mu=this._mupEvent.bind(this),this._mm=this._moverEvent.bind(this),window.addEventListener("keydown",this._de),window.addEventListener("keyup",this._ue);const e=document.getElementById("tmc");e.addEventListener("mousedown",this._md),e.addEventListener("mouseup",this._mu),e.addEventListener("mousemove",this._mm),document.oncontextmenu=e=>{window.event&&(e=window.event);try{var t=e.srcElement;return"tmc"!=t.className||(O.log(t.className),!1)}catch(i){return!1}};const t=document.getElementById("remotevideo");this.width=t.clientWidth,this.height=1440*t.clientWidth/2560,this._subscription=()=>{}}_downEvent(e){const t={action:"LinuxInputEvent",extras:{code:e.keyCode,key:e.key,input:2,type:1,value:1}};e.repeat||this._subscription(t),e.preventDefault()}_upEvent(e){const t={action:"LinuxInputEvent",extras:{code:e.keyCode,key:e.key,input:2,type:1,value:0}};this._subscription(t),e.preventDefault()}_mdownEvent(e){const t={action:"LinuxInputEvent",extras:{code:272,input:1,type:1,value:1,x:e.offsetX/this.width,y:e.offsetY/this.height}};0===e.button?this._subscription(t):1===e.button?(t.extras.code=274,this._subscription(t)):2===e.button&&(t.extras.code=273,this._subscription(t)),e.preventDefault()}_mupEvent(e){const t={action:"LinuxInputEvent",extras:{code:272,input:1,type:1,value:0,x:e.offsetX/this.width,y:e.offsetY/this.height}};0===e.button?this._subscription(t):1===e.button?(t.extras.code=274,this._subscription(t)):2===e.button&&(t.extras.code=273,this._subscription(t)),e.preventDefault()}_moverEvent(e){O.log(this.width,this.height);const t={action:"LinuxInputEvent",extras:{code:0,input:1,type:2,value:"",x:e.offsetX/this.width,y:e.offsetY/this.height}};this._subscription(t),e.preventDefault()}subscribe(e){this._subscription=e}close(){window.removeEventListener("keydown",this._de),window.removeEventListener("keyup",this._ue)}}const A=()=>{const e=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},t=function(e){if(e){let t=e.replace(new RegExp("<","g"),"&lt");return t=t.replace(new RegExp(">","g"),"&gt"),t}};let n=null;n="http:"===window.location.protocol?"http://10.180.151.100:8088/janus":"https://10.180.151.100:8089/janus";const s=i(!1);let o=null,a=null;const r="videoroomtest-"+D.randomString(12);let d=2014;""!==e("room")&&(d=parseInt(e("room")));let l=null,c=null,u=null,m=null,p={},h=0;const f=[],v={},g=[],_="yes"===e("msid")||"true"===e("msid");const b=function(e){const i={request:"join",room:e,ptype:"publisher",display:"lxj"};l=t("lxj"),a.send({message:i})},w=function(e,i,n,s,a){let l=null;n||(n=v[e]),o.attach({plugin:"janus.plugin.videoroom",opaqueId:r,success:function(i){l=i,l.remoteTracks={},l.remoteVideos=0,l.simulcastStarted=!1,D.log("Plugin attached! ("+l.getPlugin()+", id="+l.getId()+")"),D.log("  -- This is a subscriber");const o=[];for(const e in n){const i=n[e];("video"!==i.type||"safari"!==D.webRTCAdapter.browserDetails.browser||"vp9"!==i.codec&&("vp8"!==i.codec||D.safariVp8))&&(o.push({feed:i.id,mid:i.mid}),l.rfid=i.id,l.rfdisplay=t(i.display))}const a={request:"join",room:s,ptype:"subscriber",feed:e,use_msid:_,private_id:m};l.send({message:a}),x()},error:function(e){D.error("  -- Error attaching plugin...",e)},iceState:function(e){D.log("ICE state (feed #"+l.rfindex+") changed to "+e)},webrtcState:function(e){D.log("Janus says this WebRTC PeerConnection (feed #"+l.rfindex+") is "+(e?"up":"down")+" now")},slowLink:function(e,t,i){D.warn("Janus reports problems "+(e?"sending":"receiving")+" packets on mid "+i+" ("+t+" lost packets)")},onmessage:function(e,t){D.debug(" ::: Got a message (subscriber) :::",e);const i=e.videoroom;if(D.debug("Event: "+i),e.error);else if(i)if("attached"===i){for(let e=1;e<6;e++)if(!f[e]){f[e]=l,l.rfindex=e;break}if(l.spinner)l.spinner.spin();else{const e=document.getElementById("videoremote");l.spinner=new q({top:100}).spin(e)}D.log("Successfully attached to feed in room "+e.room),L("#remote"+l.rfindex).removeClass("hide").html(l.rfdisplay).show()}else if("event"===i){const t=e.substream,i=e.temporal;null==t&&null==i||l.simulcastStarted||(l.simulcastStarted=!0)}if(t){D.debug("Handling SDP as well...",t);const e=-1!==t.sdp.indexOf("stereo=1");l.createAnswer({jsep:t,tracks:[{type:"data"}],customizeSdp:function(t){e&&-1==t.sdp.indexOf("stereo=1")&&(t.sdp=t.sdp.replace("useinbandfec=1","useinbandfec=1;stereo=1"))},success:function(e){D.debug("Got SDP!",e);const t={request:"start",room:d};l.send({message:t,jsep:e})},error:function(e){D.error("WebRTC error:",e)}})}},onlocaltrack:function(e,t){},onremotetrack:function(e,t,i){if(D.debug("Remote feed #"+l.rfindex+", remote track (mid="+t+") "+(i?"added":"removed")+":",e),!i){const i=l.remoteTracks[t];if(i)try{const e=i.getTracks();for(const t in e){const i=e[t];null!=i&&i.stop()}}catch(n){}return"video"===e.kind&&(l.remoteVideos--,0===l.remoteVideos&&0===L("#videoremote .no-video-container").length&&L("#videoremote").append('<div class="no-video-container"><i class="fa fa-video-camera fa-5 no-video-icon"></i><span class="no-video-text">No remote video available</span></div>')),void delete l.remoteTracks[t]}if(l.spinner&&(l.spinner.stop(),l.spinner=null),"audio"===e.kind){const i=new MediaStream([e]);l.remoteTracks[t]=i,D.log("Created remote audio stream:",i),L("#videoremote").append('<audio class="hide" id="remotevideo'+l.rfindex+"-"+t+'" autoplay playsinline/>'),D.attachMediaStream(document.getElementById("remotevideo"),i),0===l.remoteVideos&&0===L("#videoremote .no-video-container").length&&L("#videoremote").append('<div class="no-video-container"><i class="fa fa-video-camera fa-5 no-video-icon"></i><span class="no-video-text">No remote video available</span></div>')}else{l.remoteVideos++,L("#videoremote"+l.rfindex+" .no-video-container").remove();const i=new MediaStream([e]);l.remoteTracks[t]=i,D.log("Created remote video stream:",i),L("#videoremote").append('<video class="rounded centered" id="remotevideo'+l.rfindex+"-"+t+'" width=100% autoplay playsinline/>'),L("#videoremote").append('<span class="label label-primary hide" id="curres'+l.rfindex+'" style="position: absolute; bottom: 0px; left: 0px; margin: 15px;"></span><span class="label label-info hide" id="curbitrate'+l.rfindex+'" style="position: absolute; bottom: 0px; right: 0px; margin: 15px;"></span>'),D.attachMediaStream(document.getElementById("remotevideo"),i),g[l.rfindex]||(L("#curbitrate"+l.rfindex).removeClass("hide").show(),g[l.rfindex]=setInterval((function(){if(!L("#videoremote video").get(0))return;const e=l.getBitrate();L("#curbitrate"+l.rfindex).text(e);const t=L("#videoremote video").get(0).videoWidth,i=L("#videoremote video").get(0).videoHeight;t>0&&i>0&&L("#curres"+l.rfindex).removeClass("hide").text(t+"x"+i).show()}),1e3))}},onremotestream:t=>{console.log("feed id"+e),D.attachMediaStream(document.getElementById("videoremote"),t)},oncleanup:function(){D.log(" ::: Got a cleanup notification (remote feed "+e+") :::"),l.spinner&&l.spinner.stop(),l.spinner=null,L("#remotevideo"+l.rfindex).remove(),L("#waitingvideo"+l.rfindex).remove(),L("#novideo"+l.rfindex).remove(),L("#curbitrate"+l.rfindex).remove(),L("#curres"+l.rfindex).remove(),g[l.rfindex]&&clearInterval(g[l.rfindex]),g[l.rfindex]=null,l.simulcastStarted=!1,L("#simulcast"+l.rfindex).remove(),l.remoteTracks={},l.remoteVideos=0}})};let y,k;function x(){y=L("#remotevideo").width(),L("#remotevideo").height(1440*y/2560),k=L("#remotevideo").height(),L("#tmc").css({width:y,height:k,position:"absolute","z-index":100,top:0,background:"#f00",opacity:0})}return L(window).resize((()=>{x()})),{connect:async function(e){const t=new F,i=new B,n=await t.getLocalDescription(),o=await fetch(e+"/connect",{method:"POST",cache:"no-cache",body:JSON.stringify(n)});await t.setRemoteDescription(await o.json()),i.subscribe(t.put_nowait),s.value=!0,console.log("Ready!")},attach_video_room:function(e,t){D.init({debug:"all",callback:function(){L(this).attr("disabled",!0).unbind("click"),D.isWebrtcSupported()&&(o=new D({server:n,iceServers:null,success:function(){o.attach({plugin:"janus.plugin.videoroom",opaqueId:r,success:function(e){a=e,D.log("Plugin attached! ("+a.getPlugin()+", id="+a.getId()+")"),D.log("  -- This is a publisher/manager"),b(t),a.send()},error:function(e){D.error("  -- Error attaching plugin...",e)},consentDialog:function(e){D.debug("Consent dialog should be "+(e?"on":"off")+" now")},iceState:function(e){D.log("ICE state changed to "+e)},mediaState:function(e,t,i){D.log("Janus "+(t?"started":"stopped")+" receiving our "+e+" (mid="+i+")")},webrtcState:function(e){D.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},slowLink:function(e,t,i){D.warn("Janus reports problems "+(e?"sending":"receiving")+" packets on mid "+i+" ("+t+" lost packets)")},onmessage:function(i,n){D.debug(" ::: Got a message (publisher) :::",i);const s=i.videoroom;if(D.debug("Event: "+s),s)if("joined"===s){c=i.id,m=i.private_id,D.log("Successfully joined room "+i.room+" with ID "+c);w(e,null,[],t)}else if("destroyed"===s)D.warn("The room has been destroyed!");else if("event"===s)if(i.streams){const e=i.streams;for(const t in e){const i=e[t];i.id=c,i.display=l}v[c]=e}else if(i.publishers){const e=i.publishers;console.log("newRemoteFeed2  Got a list of available publishers/feeds:",e);for(const t in e){if(e[t].dummy)continue;const i=e[t].id,n=e[t].display,s=e[t].streams;for(const e in s){const t=s[e];t.id=i,t.display=n}v[i]=s,console.log(" newRemoteFeed2 >> ["+i+"] "+n+":",s);break}}else if(i.leaving){const e=i.leaving;D.log("Publisher left: "+e);let t=null;for(let i=1;i<6;i++)if(f[i]&&f[i].rfid==e){t=f[i];break}t&&(D.debug("Feed "+t.rfid+" ("+t.rfdisplay+") has left the room, detaching"),f[t.rfindex]=null,t.detach()),delete v[e]}else if(i.unpublished){const e=i.unpublished;if(D.log("Publisher left: "+e),"ok"===e)return void a.hangup();let t=null;for(let i=1;i<6;i++)if(f[i]&&f[i].rfid==e){t=f[i];break}t&&(D.debug("Feed "+t.rfid+" ("+t.rfdisplay+") has left the room, detaching"),f[t.rfindex]=null,t.detach()),delete v[e]}else i.error&&426===i.error_code&&D.debug("This is a no such room error: give a more meaningful description");if(n){D.debug("Handling SDP as well...",n),a.handleRemoteJsep({jsep:n});i.audio_codec;u&&u.getAudioTracks()&&u.getAudioTracks().length;i.video_codec;u&&u.getVideoTracks()&&u.getVideoTracks().length}},onlocaltrack:function(e,t){D.debug("Local track "+(t?"added":"removed")+":",e);const i=e.id.replace(/[{}]/g,"");if(!t){const t=p[i];if(t)try{const e=t.getTracks();for(const t in e){const i=e[t];null!=i&&i.stop()}}catch(n){}return"video"===e.kind&&(h--,0===h&&D.log("No video, at least for now: show a placeholder:")),void delete p[i]}p[i]},onremotetrack:function(e,t,i){},oncleanup:function(){D.log(" ::: Got a cleanup notification: we are unpublished now :::"),u=null,delete v[c],p={},h=0}})},error:function(e){D.error(e)},destroyed:function(){window.location.reload()}}))}})}}},G={key:0,class:"my-4"},z=(e=>(y("data-v-9249a52d"),e=e(),k(),e))((()=>h("div",{id:"video-group",class:"video-group my-4"},[h("video",{id:"remotevideo",class:"w-[100%]",controls:"",autoplay:"",muted:""}),h("div",{id:"tmc",class:"tmc"})],-1))),H=W(n({__name:"workStationDetail",setup(n){const{wsCache:y}=e(),k=t(),{attach_video_room:D,connect:L}=A(),q=M(),{t:O}=b(),{push:W,currentRoute:P}=s(),J=i(!1),U=i(!1),V=i(!1),F=i(!1),B=o([]);let H=o([]);const $=P.value.query,Q=i(!1);(async()=>{const e=await I($).catch((e=>{-1118===e.response.data.errorCode&&w.error("设备不存在")})).finally((()=>{J.value=!1}));if(null==e?void 0:e.success){const t=e.data.filter((e=>"hub"===e.deviceType)),i=e.data.filter((e=>"stb"===e.deviceType));H=e.data.filter((e=>"container"===e.deviceType)),t.length||B.push({label:O("绑定hub"),keys:[O("绑定hub")]}),i.length||B.push({label:O("绑定stb"),keys:[O("绑定stb")]}),t.length&&i.length?Q.value=!0:Q.value=!1,Z(H)}})();const X=i("OFFLINE"),Y=o({meetingId:"",meetingUrl:"",meetingJoined:""});let K=i();const Z=async e=>{await q.initWebsocket();const t={deviceId:e[0].deviceId};q.sendWebSocketMessage(t,2,"container_status"),q.sendWebSocketMessage(t,6,"container_meeting_status"),q.getWebsocket.onmessage=e=>{var i;const n=JSON.parse(e.data);if(2===n.requestId){X.value=n.data.deviceStatus;const e={stunServer:n.data.stunServer||"",turnUsername:n.data.turnUserName,turnCredential:n.data.turnCredential,turnServer:n.data.turnServer};y.set(k.server,e),"ONLINE"===(null==(i=n.data)?void 0:i.deviceStatus)&&(L(n.data.rtcbotConnectUrl),D(n.data.publisherId,n.data.roomId))}else if(3===n.requestId)J.value=!1;else if(4===n.requestId)J.value=!1,X.value="OFFLINE";else if(5===n.requestId)U.value=!1;else if(6===n.requestId)K.value=n.data;else if(7===n.requestId&&n.success)V.value=!1,location.href=Y.meetingUrl;else if(8===n.requestId&&n.success)F.value=!1,q.sendWebSocketMessage(t,6,"container_meeting_status");else{X.value=n.deviceStatus;const e={stunServer:n.stunServer||"",turnUsername:n.turnUserName,turnCredential:n.turnCredential,turnServer:n.turnServer};y.set(k.server,e),"ONLINE"===n.deviceStatus&&(L(n.rtcbotConnectUrl),D(n.publisherId,n.roomId))}n.success||3!==n.requestId||w.error("容器正在关闭中，请稍后再进行操作"),n.success||4!==n.requestId||w.error("容器正在启动中，请稍后再进行操作")}},ee=i();(async()=>{const e={workstationId:$.workstationId},t=await S(e).catch((e=>{-1114===e.response.data.errorCode&&w.error("房间不存在")}));t&&t.success&&(ee.value=t.data[0].roomId)})();const te=e=>{W(`/work-station/device-add?workstationId=${$.workstationId}&roomId=${ee.value}`)},ie=()=>{W("/device-screen")},ne=()=>{U.value=!0;const e={deviceId:H[0].deviceId};q.sendWebSocketMessage(e,5,"container_reconnect_to_hub")},se=i(!1),oe=[{field:"meetingId",label:O("会议id")},{field:"meetingName",label:O("会议名称")},{field:"meetingBeginTime",label:O("会议开始时间")},{field:"meetingBeginTime",label:O("会议结束时间")},{field:"meetingStatus",label:O("会议状态"),formatter:(e,t,i)=>a(j,{type:"Running"===i?"success":"Ended"===i?"info":"warning"},(()=>O("Running"===i?"进行中":"Ended"===i?"已结束":"未开始")))},{field:"meetingJoined",label:O("是否正在参加此会议"),formatter:(e,t,i)=>a(j,{type:i?"success":"info"},(()=>O(i?"正在参会":"未参会")))},{field:"action",width:"260px",label:O("tableDemo.action")}],ae=()=>{se.value=!0};return(e,t)=>(r(),d(p(x),{title:`${p(O)("详情")}`},{default:l((()=>{var e;return[c(m(p(C),{"show-index":!1,title:`${p(O)("您还有未绑定的设备")}`,schema:B,onClick:te},null,8,["title","schema"]),[[u,!Q.value]]),h("div",null,[m(p(N),{keys:[p(O)("ONLINE"===X.value?"在线":"离线")]},{default:l((()=>[f(v(p(O)(`您的容器处于${"ONLINE"===X.value?"在线":"离线"}状态`)),1)])),_:1},8,["keys"]),m(p(E),{loading:J.value,type:"primary",class:"w-[10%] mx-4",onClick:t[0]||(t[0]=e=>{return t="ONLINE"===X.value?4:3,J.value=!0,void q.sendWebSocketMessage(H[0].deviceId,t,3===t?"container_create":"container_destroy");var t})},{default:l((()=>[f(v(p(O)("ONLINE"===X.value?"停止容器":"启动容器")),1)])),_:1},8,["loading"]),m(p(E),{type:"primary",class:"w-[10%] mx-4",onClick:ie},{default:l((()=>[f(v(p(O)("全屏显示")),1)])),_:1}),m(p(E),{loading:U.value,type:"primary",class:"w-[10%] mx-4",onClick:ne},{default:l((()=>[f(v(p(O)("重连hub")),1)])),_:1},8,["loading"])]),(null==(e=p(K))?void 0:e.length)?(r(),g("div",G,[m(p(N),{keys:[p(O)("会议列表")],onClick:ae},{default:l((()=>[f(v(p(O)("您有会议需要参加，您可以点击会议列表查看并参加会议")),1)])),_:1},8,["keys"])])):_("",!0),z,m(p(R),{modelValue:se.value,"onUpdate:modelValue":t[2]||(t[2]=e=>se.value=e),title:p(O)("会议列表")},{footer:l((()=>[m(p(E),{onClick:t[1]||(t[1]=e=>se.value=!1)},{default:l((()=>[f(v(p(O)("dialogDemo.close")),1)])),_:1})])),default:l((()=>[m(p(T),{columns:oe,data:p(K),loading:J.value,selection:!1,border:"",defaultSort:{prop:"meetingId",order:"descending"}},{action:l((e=>[m(p(E),{loading:V.value,type:"primary",onClick:t=>(e=>{if(e.row.meetingJoined)location.href=e.row.meetingUrl;else{V.value=!0,Y.meetingUrl=e.row.meetingUrl;const t={deviceId:H[0].deviceId,meetingId:e.row.meetingId};q.sendWebSocketMessage(t,7,"container_meeting_join")}})(e)},{default:l((()=>[f(v(p(O)(e.row.meetingJoined?"进入会议":"加入会议")),1)])),_:2},1032,["loading","onClick"]),e.row.meetingJoined?(r(),d(p(E),{key:0,loading:F.value,type:"danger",onClick:t=>(e=>{F.value=!0;const t={deviceId:H[0].deviceId,meetingId:e.row.meetingId};q.sendWebSocketMessage(t,8,"container_meeting_exit")})(e)},{default:l((()=>[f(v(p(O)("退出会议")),1)])),_:2},1032,["loading","onClick"])):_("",!0)])),_:1},8,["data","loading"])])),_:1},8,["modelValue","title"])]})),_:1},8,["title"]))}}),[["__scopeId","data-v-9249a52d"]]);export{H as default};
