import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-e04d0b7e.js";import{d as a,u as t,r as o,o as s,g as r,w as i,f as l,a as d,m,t as n,j as p,E as c}from"./index-61faf58b.js";import{_ as u}from"./Table.vue_vue_type_script_lang-b82724f5.js";import{E as j}from"./el-button-e6441f40.js";import{E as v}from"./el-message-box-f87b857a.js";import"./el-input-dc0bf57b.js";import"./el-overlay-37f85d5d.js";import{a as b,b as f}from"./index-ea2c32ca.js";import"./el-card-839bb50e.js";import"./el-popper-e10402a6.js";import"./index-f844f20d.js";import"./tsxHelper-98042daf.js";import"./event-5568c9d8.js";import"./el-tag-450bf357.js";import"./index-7630a328.js";import"./scroll-a2507849.js";import"./debounce-7bd0410d.js";import"./validator-9877d78c.js";import"./aria-ecee1d93.js";import"./vnode-ae8de639.js";import"./index-4154bb8a.js";const _=a({__name:"DeviceList",setup(a){const{t:_}=p(),{currentRoute:y}=t(),g=y.value.query,I=[{field:"deviceId",label:_("设备id")},{field:"deviceName",label:_("设备名称")},{field:"macAddress",label:_("设备MAC地址")},{field:"serialNumber",label:_("设备序列号")},{field:"deviceType",label:_("设备类型")},{field:"createTime",label:_("创建时间")},{field:"updateTime",label:_("更新时间")},{field:"action",label:_("tableDemo.action")}],w=o(!0);let x=o();const k=async()=>{let e=o();Object.keys(g).length&&(e.value={workstationId:Number(g.workstationId),roomId:Number(g.roomId)});const a=await b(e.value).catch((()=>{})).finally((()=>{w.value=!1}));a&&a.success&&(x.value=a.data)};k();return(a,t)=>(s(),r(d(e),{title:d(_)("设备管理")},{default:i((()=>[l(d(u),{columns:I,data:d(x),loading:w.value,border:"",defaultSort:{prop:"display_time",order:"descending"}},{action:i((e=>[l(d(j),{type:"danger",onClick:a=>(e=>{v.alert("确定要删除此设备吗？","确认删除",{confirmButtonText:"OK",callback:async a=>{const t={workstationId:null==e?void 0:e.row.workstationId,roomId:e.row.roomId,deviceId:e.row.deviceId},o=await f(t).catch((e=>{-1120===e.response.data.errorCode&&c.error("设备删除失败")}));o&&o.success&&(c({message:"删除成功",type:"success"}),k())}})})(e)},{default:i((()=>[m(n(d(_)("删除")),1)])),_:2},1032,["onClick"])])),_:1},8,["data","loading"])])),_:1},8,["title"]))}});export{_ as default};
