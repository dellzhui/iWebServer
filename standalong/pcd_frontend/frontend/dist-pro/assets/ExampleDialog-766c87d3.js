import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-e04d0b7e.js";import{_ as a}from"./Search.vue_vue_type_script_setup_true_lang-f7cad0b0.js";import{_ as t}from"./Dialog.vue_vue_type_style_index_0_lang-eae2c59d.js";import{d as l,j as o,q as i,x as r,r as s,ai as m,o as n,c as p,f as u,w as d,a as c,e as _,m as v,t as g,y as f,g as j,A as y,F as b}from"./index-61faf58b.js";import{E as h}from"./el-button-e6441f40.js";import{E as w}from"./el-tag-450bf357.js";import{_ as x}from"./Table.vue_vue_type_script_lang-b82724f5.js";import{g as D,d as S,s as k}from"./index-055e179d.js";import{u as P}from"./useTable-c44ab387.js";import{_ as C}from"./Write.vue_vue_type_script_setup_true_lang-1420148c.js";import{_ as R}from"./Detail.vue_vue_type_script_setup_true_lang-8828b5b0.js";import{u as F}from"./useCrudSchemas-9ea79cf4.js";import"./el-card-839bb50e.js";import"./el-popper-e10402a6.js";import"./index-f844f20d.js";import"./Form-7bd7b6f3.js";import"./el-col-0b4bbd49.js";import"./el-input-dc0bf57b.js";import"./event-5568c9d8.js";import"./tsxHelper-98042daf.js";import"./index-7630a328.js";import"./scroll-a2507849.js";import"./debounce-7bd0410d.js";import"./validator-9877d78c.js";import"./el-input-number-b68dff77.js";import"./el-switch-3796832a.js";import"./el-divider-30a44c9a.js";import"./InputPassword-6a9b1358.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./style.css_vue_type_style_index_0_src_true_lang-cd9eff14.js";import"./aria-ecee1d93.js";import"./useForm-e3b0495d.js";import"./el-overlay-37f85d5d.js";import"./vnode-ae8de639.js";import"./use-dialog-3079ebb1.js";import"./refs-31ecab84.js";import"./index-4154bb8a.js";import"./el-message-box-f87b857a.js";import"./useValidator-03bda066.js";import"./Descriptions-9e91dd7b.js";import"./index-0bf33af3.js";import"./tree-b59d36bb.js";const z={class:"mb-10px"},L=l({__name:"ExampleDialog",setup(l){const{register:L,tableObject:E,methods:V}=P({getListApi:D,delListApi:S,response:{list:"list",total:"total"},defaultParams:{title:"s"}}),{getList:Y,setSearchParams:A}=V;Y();const{t:H}=o(),M=i([{field:"index",label:H("tableDemo.index"),type:"index",form:{show:!1},detail:{show:!1}},{field:"title",label:H("tableDemo.title"),search:{show:!0},form:{colProps:{span:24}},detail:{span:24}},{field:"author",label:H("tableDemo.author")},{field:"display_time",label:H("tableDemo.displayTime"),form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{field:"importance",label:H("tableDemo.importance"),formatter:(e,a,t)=>r(w,{type:1===t?"success":2===t?"warning":"danger"},(()=>H(1===t?"tableDemo.important":2===t?"tableDemo.good":"tableDemo.commonly"))),form:{component:"Select",componentProps:{style:{width:"100%"},options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}}},{field:"pageviews",label:H("tableDemo.pageviews"),form:{component:"InputNumber",value:0}},{field:"content",label:H("exampleDemo.content"),table:{show:!1},form:{component:"Editor",colProps:{span:24}},detail:{span:24}},{field:"action",width:"260px",label:H("tableDemo.action"),form:{show:!1},detail:{show:!1}}]),{allSchemas:T}=F(M),U=s(!1),q=s(""),I=()=>{q.value=H("exampleDemo.add"),E.currentRow=null,U.value=!0,J.value=""},W=s(!1),G=async(e,a)=>{var t;E.currentRow=e;const{delList:l,getSelections:o}=V,i=await o();W.value=!0,await l(a?i.map((e=>e.id)):[null==(t=E.currentRow)?void 0:t.id],a).finally((()=>{W.value=!1}))},J=s(""),N=(e,a)=>{q.value=H("edit"===a?"exampleDemo.edit":"exampleDemo.detail"),J.value=a,E.currentRow=e,U.value=!0},O=s(),Q=s(!1),$=async()=>{var e;const a=c(O);await(null==(e=null==a?void 0:a.elFormRef)?void 0:e.validate((async e=>{if(e){Q.value=!0;const e=await(null==a?void 0:a.getFormData());await k(e).catch((()=>{})).finally((()=>{Q.value=!1}))&&(U.value=!1,E.currentPage=1,Y())}})))};return(l,o)=>{const i=m("hasPermi");return n(),p(b,null,[u(c(e),null,{default:d((()=>[u(c(a),{model:{title:"s"},schema:c(T).searchSchema,onSearch:c(A),onReset:c(A)},null,8,["schema","onSearch","onReset"]),_("div",z,[u(c(h),{type:"primary",onClick:I},{default:d((()=>[v(g(c(H)("exampleDemo.add")),1)])),_:1}),u(c(h),{loading:W.value,type:"danger",onClick:o[0]||(o[0]=e=>G(null,!0))},{default:d((()=>[v(g(c(H)("exampleDemo.del")),1)])),_:1},8,["loading"])]),u(c(x),{pageSize:c(E).pageSize,"onUpdate:pageSize":o[1]||(o[1]=e=>c(E).pageSize=e),currentPage:c(E).currentPage,"onUpdate:currentPage":o[2]||(o[2]=e=>c(E).currentPage=e),columns:c(T).tableColumns,data:c(E).tableList,loading:c(E).loading,pagination:{total:c(E).total},onRegister:c(L)},{action:d((({row:e})=>[f((n(),j(c(h),{type:"primary",onClick:a=>N(e,"edit")},{default:d((()=>[v(g(c(H)("exampleDemo.edit")),1)])),_:2},1032,["onClick"])),[[i,["example:dialog:edit"]]]),f((n(),j(c(h),{type:"success",onClick:a=>N(e,"detail")},{default:d((()=>[v(g(c(H)("exampleDemo.detail")),1)])),_:2},1032,["onClick"])),[[i,["example:dialog:view"]]]),f((n(),j(c(h),{type:"danger",onClick:a=>G(e,!1)},{default:d((()=>[v(g(c(H)("exampleDemo.del")),1)])),_:2},1032,["onClick"])),[[i,["example:dialog:delete"]]])])),_:1},8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}),u(c(t),{modelValue:U.value,"onUpdate:modelValue":o[4]||(o[4]=e=>U.value=e),title:q.value},{footer:d((()=>["detail"!==J.value?(n(),j(c(h),{key:0,type:"primary",loading:Q.value,onClick:$},{default:d((()=>[v(g(c(H)("exampleDemo.save")),1)])),_:1},8,["loading"])):y("",!0),u(c(h),{onClick:o[3]||(o[3]=e=>U.value=!1)},{default:d((()=>[v(g(c(H)("dialogDemo.close")),1)])),_:1})])),default:d((()=>["detail"!==J.value?(n(),j(C,{key:0,ref_key:"writeRef",ref:O,"form-schema":c(T).formSchema,"current-row":c(E).currentRow},null,8,["form-schema","current-row"])):y("",!0),"detail"===J.value?(n(),j(R,{key:1,"detail-schema":c(T).detailSchema,"current-row":c(E).currentRow},null,8,["detail-schema","current-row"])):y("",!0)])),_:1},8,["modelValue","title"])],64)}}});export{L as default};
