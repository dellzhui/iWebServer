import{F as e}from"./Form-7bd7b6f3.js";import{_ as r}from"./ContentWrap.vue_vue_type_script_setup_true_lang-e04d0b7e.js";import{d as s,u as o,r as t,q as a,o as i,g as p,w as l,f as m,a as n,m as d,t as u,j as c,E as j}from"./index-61faf58b.js";import{u as _}from"./useValidator-03bda066.js";import{E as f}from"./el-button-e6441f40.js";import{u as v}from"./useForm-e3b0495d.js";import{d as b}from"./index-ea2c32ca.js";import{_ as y}from"./_plugin-vue_export-helper-1b428a4d.js";import"./el-col-0b4bbd49.js";import"./el-popper-e10402a6.js";import"./index-f844f20d.js";import"./el-input-dc0bf57b.js";import"./event-5568c9d8.js";import"./el-tag-450bf357.js";import"./tsxHelper-98042daf.js";import"./index-7630a328.js";import"./scroll-a2507849.js";import"./debounce-7bd0410d.js";import"./validator-9877d78c.js";import"./el-input-number-b68dff77.js";import"./el-switch-3796832a.js";import"./el-divider-30a44c9a.js";import"./InputPassword-6a9b1358.js";import"./style.css_vue_type_style_index_0_src_true_lang-cd9eff14.js";import"./aria-ecee1d93.js";import"./el-card-839bb50e.js";import"./index-4154bb8a.js";const g=y(s({__name:"DeviceAdd",setup(s){const{required:y}=_(),{t:g}=c(),{push:h,currentRoute:w}=o(),x=t(!1),I=w.value.query,C=I.workstationId,P=I.roomId,k=a([{field:"macAddress",label:g("设备MAC地址"),component:"Input",formItemProps:{rules:[y()]},colProps:{span:13},componentProps:{style:{width:"100%"},placeholder:g("请输入设备MAC地址")}},{field:"deviceType",label:g("设备类型"),formItemProps:{rules:[y()]},component:"Select",componentProps:{options:[{label:"hub",value:"hub"},{label:"stb",value:"stb"}]}}]),{register:F,elFormRef:R,methods:A}=v(),$=async()=>{const e=n(R);await(null==e?void 0:e.validate((async e=>{if(e){x.value=!0;const{getFormData:e}=A,r=await e();q(r)}})))},q=async e=>{const r=await b(e,I).catch((e=>{-1117===e.response.data.errorCode?j.error("设备已存在"):-104===e.response.data.errorCode?j.error("设备格式不正确"):-1119===e.response.data.errorCode&&j.error("设备绑定失败")})).finally((()=>{x.value=!1}));r&&r.success&&h(`/work-station/device-list?workstationId=${C}&roomId=${P}`)};return(s,o)=>(i(),p(n(r),{title:`${n(g)("设备绑定")}`},{default:l((()=>[m(n(e),{isCustom:!1,schema:k,ref:"formRef",onRegister:n(F)},null,8,["schema","onRegister"]),m(n(f),{loading:x.value,type:"primary",class:"w-[10%]",onClick:$},{default:l((()=>[d(u(n(g)("提交")),1)])),_:1},8,["loading"])])),_:1},8,["title"]))}}),[["__scopeId","data-v-1151b598"]]);export{g as default};
