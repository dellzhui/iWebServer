import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-e04d0b7e.js";import{_ as t}from"./Search.vue_vue_type_script_setup_true_lang-f7cad0b0.js";import{d as a,cX as o,j as s,q as l,x as i,r,o as m,g as n,w as p,f as c,a as d,e as u,m as g,t as b}from"./index-61faf58b.js";import{E as j}from"./el-button-e6441f40.js";import{E as _}from"./el-tag-450bf357.js";import{_ as f}from"./Table.vue_vue_type_script_lang-b82724f5.js";import{g as h,d as v}from"./index-055e179d.js";import{u as w}from"./useTable-c44ab387.js";import{u as x}from"./useCrudSchemas-9ea79cf4.js";import{g as D}from"./index-66726be2.js";import"./el-card-839bb50e.js";import"./el-popper-e10402a6.js";import"./index-f844f20d.js";import"./Form-7bd7b6f3.js";import"./el-col-0b4bbd49.js";import"./el-input-dc0bf57b.js";import"./event-5568c9d8.js";import"./tsxHelper-98042daf.js";import"./index-7630a328.js";import"./scroll-a2507849.js";import"./debounce-7bd0410d.js";import"./validator-9877d78c.js";import"./el-input-number-b68dff77.js";import"./el-switch-3796832a.js";import"./el-divider-30a44c9a.js";import"./InputPassword-6a9b1358.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./style.css_vue_type_style_index_0_src_true_lang-cd9eff14.js";import"./aria-ecee1d93.js";import"./useForm-e3b0495d.js";import"./index-4154bb8a.js";import"./el-message-box-f87b857a.js";import"./el-overlay-37f85d5d.js";import"./vnode-ae8de639.js";import"./tree-b59d36bb.js";const S={class:"mb-10px"},y=a({__name:"useCrudSchemas",setup(a){const y=o(),{register:P,tableObject:C,methods:R}=w({getListApi:h,delListApi:v,response:{list:"list",total:"total"}}),{getList:L,setSearchParams:z}=R;L();const{t:k}=s(),H=l([{field:"index",label:k("tableDemo.index"),type:"index",form:{show:!1},detail:{show:!1}},{field:"title",label:k("tableDemo.title"),search:{show:!0},form:{colProps:{span:24}},detail:{span:24}},{field:"author",label:k("tableDemo.author")},{field:"display_time",label:k("tableDemo.displayTime"),form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{field:"importance",label:k("tableDemo.importance"),formatter:(e,t,a)=>i(_,{type:1===a?"success":2===a?"warning":"danger"},(()=>k(1===a?"tableDemo.important":2===a?"tableDemo.good":"tableDemo.commonly"))),search:{show:!0,component:"Select",componentProps:{options:y.getDictObj.importance}},form:{component:"Select",componentProps:{options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}}},{field:"importance2",label:`${k("tableDemo.importance")}2`,search:{show:!0,component:"Select",dictName:"importance"}},{field:"importance3",label:`${k("tableDemo.importance")}3`,search:{show:!0,component:"Select",api:async()=>(await D()).data}},{field:"pageviews",label:k("tableDemo.pageviews"),form:{component:"InputNumber",value:0}},{field:"content",label:k("exampleDemo.content"),table:{show:!1},form:{component:"Editor",colProps:{span:24}},detail:{span:24}},{field:"action",width:"260px",label:k("tableDemo.action"),form:{show:!1},detail:{show:!1}}]),{allSchemas:Y}=x(H),E=r(!1),F=async(e,t)=>{var a;C.currentRow=e;const{delList:o,getSelections:s}=R,l=await s();E.value=!0,await o(t?l.map((e=>e.id)):[null==(a=C.currentRow)?void 0:a.id],t).finally((()=>{E.value=!1}))};return(a,o)=>(m(),n(d(e),null,{default:p((()=>[c(d(t),{schema:d(Y).searchSchema,onSearch:d(z),onReset:d(z)},null,8,["schema","onSearch","onReset"]),u("div",S,[c(d(j),{loading:E.value,type:"danger",onClick:o[0]||(o[0]=e=>F(null,!0))},{default:p((()=>[g(b(d(k)("exampleDemo.del")),1)])),_:1},8,["loading"])]),c(d(f),{pageSize:d(C).pageSize,"onUpdate:pageSize":o[1]||(o[1]=e=>d(C).pageSize=e),currentPage:d(C).currentPage,"onUpdate:currentPage":o[2]||(o[2]=e=>d(C).currentPage=e),columns:d(Y).tableColumns,data:d(C).tableList,loading:d(C).loading,pagination:{total:d(C).total},onRegister:d(P)},{action:p((({row:e})=>[c(d(j),{type:"danger",onClick:t=>F(e,!1)},{default:p((()=>[g(b(d(k)("exampleDemo.del")),1)])),_:2},1032,["onClick"])])),_:1},8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}))}});export{y as default};
