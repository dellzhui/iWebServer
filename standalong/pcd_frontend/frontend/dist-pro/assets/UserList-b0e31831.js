import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-e04d0b7e.js";import{d as a,u as s,r as t,s as r,o,g as i,w as l,f as n,a as p,m as d,t as m,A as u,j as c,E as j}from"./index-61faf58b.js";import{_ as f}from"./Table.vue_vue_type_script_lang-b82724f5.js";import{E as _}from"./el-button-e6441f40.js";import{E as b}from"./el-message-box-f87b857a.js";import"./el-input-dc0bf57b.js";import"./el-overlay-37f85d5d.js";import{u as y,a as g}from"./index-34f08ef1.js";import"./el-card-839bb50e.js";import"./el-popper-e10402a6.js";import"./index-f844f20d.js";import"./tsxHelper-98042daf.js";import"./event-5568c9d8.js";import"./el-tag-450bf357.js";import"./index-7630a328.js";import"./scroll-a2507849.js";import"./debounce-7bd0410d.js";import"./validator-9877d78c.js";import"./aria-ecee1d93.js";import"./vnode-ae8de639.js";import"./index-4154bb8a.js";const v=a({__name:"UserList",setup(a){const{t:v}=c(),{push:x}=s(),w=[{field:"userId",label:v("用户id")},{field:"username",label:v("用户名")},{field:"email",label:v("邮箱")},{field:"isAdmin",label:v("是否管理员"),formatter:(e,a,s)=>s?"是":"否"},{field:"action",width:"260px",label:v("tableDemo.action")}],k=t(!0);let h=t();const C=async()=>{const e=await y({pageNo:1,pageSize:10}).catch((()=>{})).finally((()=>{k.value=!1}));e&&(h.value=e.data)},I=()=>{x("/user/user-add")};return r((()=>{C()})),(a,s)=>(o(),i(p(e),{title:p(v)("用户管理"),operation:p(v)("新增用户"),onOperationEmit:I},{default:l((()=>[n(p(f),{columns:w,data:p(h),loading:k.value,border:"",defaultSort:{prop:"display_time",order:"descending"}},{action:l((e=>[n(p(_),{type:"primary",onClick:a=>(e=>{x(`/user/user-add?username=${e.row.username}&userId=${e.row.userId}`)})(e)},{default:l((()=>[d(m(p(v)("编辑")),1)])),_:2},1032,["onClick"]),e.row.isAdmin?u("",!0):(o(),i(p(_),{key:0,type:"danger",onClick:a=>(e=>{const a=e.row.userId;b.alert("确定要删除此用户吗？","确认删除",{confirmButtonText:"OK",callback:async e=>{const s=await g({userId:a}).catch((e=>{})).finally((()=>{}));s&&s.success&&(j({message:"删除成功",type:"success"}),C())}})})(e)},{default:l((()=>[d(m(p(v)("删除")),1)])),_:2},1032,["onClick"]))])),_:1},8,["data","loading"])])),_:1},8,["title","operation"]))}});export{v as default};
